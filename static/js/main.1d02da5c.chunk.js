(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{264:function(e,t,a){e.exports=a(392)},391:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),o=a.n(c),l=a(17),u=a(15),i=a(76),s=a.n(i),m=a(155),d=a(218),p=a.n(d).a.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),E=a(219),h=Object(E.a)({basename:"https://blackwhite2018.github.io/user-list"}),f=function(e){return{type:"SET_USERS_LIST",payload:e}},v=function(e){return{type:"SET_LOADING",payload:e}},g=function(e){return{type:"SET_ERROR_REQUEST",payload:e}},b=function(e){return{type:"SET_SUCCESS_REQUEST",payload:e}},y=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0)),e.prev=1,e.next=4,p.post("/api-token-auth/",a);case 4:n=e.sent,r=n.data.token,localStorage.setItem("authToken",r),t(g(!1)),h.push("/users-list"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(g(!0));case 14:return e.prev=14,t(v(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0)),n=localStorage.getItem("authToken"),e.prev=2,e.next=5,p.post("/api/v1/users/",a,{headers:{Authorization:"token ".concat(n)}});case 5:t(g(!1)),t(b(!0)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(g(!0)),t(b(!1));case 13:return e.prev=13,t(v(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0)),a=localStorage.getItem("authToken"),e.prev=2,e.next=5,p.get("/api/v1/users/",{headers:{Authorization:"token ".concat(a)}});case 5:n=e.sent,r=n.data,t(f(r)),t(g(!1)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t(g(!0));case 14:return e.prev=14,t(v(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),j=a(212),k=a(213),w=a(408),C=a(413),T=a(393),x=function(e){var t=e.input,a=e.icon,n=e.type,c=e.placeholder,o=e.meta,l=o.touched,u=o.error;return r.a.createElement(w.a.Input,Object.assign({},t,{icon:a,placeholder:c,type:n,error:l&&u&&{content:u},fluid:!0}))},_=function(e){var t=e.label,a=e.input;return r.a.createElement(w.a.Checkbox,{checked:!!a.value,name:a.name,label:t,onChange:function(e,t){var n=t.checked;return a.onChange(n)}})},R=function(e){return e?void 0:"Required"},L=function(e){return e&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/i.test(e)?"Minimum eight characters, at least one uppercase letter, one lowercase letter and one number":void 0},A=Object(k.a)({form:"login-form"})((function(e){var t=e.handleSubmit;return r.a.createElement(w.a,{size:"large",onSubmit:t},r.a.createElement(C.a,{stacked:!0},r.a.createElement(j.a,{name:"username",type:"text",icon:"user",placeholder:"E-mail address",component:x}),r.a.createElement(j.a,{name:"password",type:"password",icon:"lock",placeholder:"Password",component:x}),r.a.createElement(T.a,{color:"teal",fluid:!0,size:"large"},"Login")))})),I=a(414),z=a(411),N=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.app.requestError}));return r.a.createElement(I.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(I.a.Column,{style:{maxWidth:450}},r.a.createElement(A,{onSubmit:function(t){y(e,t)}}),t&&r.a.createElement(z.a,{negative:!0,header:"Authorization failed",content:"Please try again"})))},U=a(224),q=a(409),H=a(75),K=Object(u.g)((function(e){var t=e.users,a=e.searchKey,n=e.sort,c=e.active,o=(e.history,a?function(e,t){return e.filter((function(e){return e.username.toLowerCase().startsWith(t.toLowerCase())}))}(t,a):t);return r.a.createElement(q.a,{style:{marginTop:"20px"},celled:!0},r.a.createElement(q.a.Header,null,r.a.createElement(q.a.Row,null,r.a.createElement(q.a.HeaderCell,null,"#"),r.a.createElement(q.a.HeaderCell,null,r.a.createElement("div",{className:"icons-wrapper"},r.a.createElement("div",{className:"sort-icons"},r.a.createElement("div",{className:"icon ".concat(!0===c?"icon-active":""),"data-sort":"ascend",onClick:n},r.a.createElement(H.a,{name:"angle up"})),r.a.createElement("div",{className:"icon ".concat(!1===c?"icon-active":""),"data-sort":"descend",name:"descend",onClick:n},r.a.createElement(H.a,{name:"angle down"}))),r.a.createElement("div",null,"ID"))),r.a.createElement(q.a.HeaderCell,null,"First Name"),r.a.createElement(q.a.HeaderCell,null,"Username"))),r.a.createElement(q.a.Body,null,o.map((function(e,t){var a=e.id,n=e.first_name,c=e.username;return r.a.createElement(q.a.Row,{key:c},r.a.createElement(q.a.Cell,null,t+1),r.a.createElement(q.a.Cell,null,a),r.a.createElement(q.a.Cell,null,n||"Anonymous"),r.a.createElement(q.a.Cell,null,c))}))))})),P=a(406),W=a(415),Y=a(405),B=function(){var e=Object(l.c)();return r.a.createElement(Y.a,{icon:"users",onChange:function(t){var a=t.target.value;e({type:"SET_SEARCH_KEY",payload:a})},iconPosition:"left",placeholder:"Search users...",fluid:!0})},D=a(36),F=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.app.searchKey})),a=Object(l.d)((function(e){return e.app.usersList})),c=Object(n.useState)(null),o=Object(U.a)(c,2),u=o[0],i=o[1];return Object(n.useEffect)((function(){S(e)}),[e]),r.a.createElement(P.a,{style:{paddingTop:"20px"},text:!0},r.a.createElement(C.a,{clearing:!0},r.a.createElement(W.a,{as:D.a,to:"/",floated:"right",onClick:function(){localStorage.removeItem("authToken")}},"Log Out")),r.a.createElement(I.a,{columns:2},r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Column,null,r.a.createElement(B,null)),r.a.createElement(I.a.Column,null,r.a.createElement(T.a,{to:"/add-user",icon:"add",floated:"right",as:D.a})))),a&&r.a.createElement(K,{users:a,sort:function(t){var n=t.currentTarget.dataset.sort;i("ascend"===n),e(f(function(e,t){return t?e.sort((function(e,t){return e.id-t.id})):e.sort((function(e,t){var a=e.id;return t.id-a}))}(a,"ascend"===n)))},searchKey:t,active:u}))},M=function(e){var t=e.children;return r.a.createElement(P.a,{className:"layout"},r.a.createElement(I.a,{style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(I.a.Column,null,t)))},Q=function(e){var t=e.header,a=e.text;return r.a.createElement(z.a,{size:"huge",icon:!0},r.a.createElement(H.a,{name:"circle notched",loading:!0}),r.a.createElement(z.a.Content,null,r.a.createElement(z.a.Header,null,t),a,r.a.createElement(D.a,{to:"/"}," You can return to main page.")))},G=function(){return r.a.createElement(M,null,r.a.createElement(Q,{header:"Page not found",text:"You may have made a mistake when going to the page."}))},J=a(410),X=a(407),Z=function(){return r.a.createElement(J.a,{active:!0,inverted:!0,page:!0},r.a.createElement(X.a,{size:"huge",inverted:!0},"Loading..."))},$=Object(k.a)({form:"user-credentials-form",initialValues:{is_active:!1}})((function(e){var t=e.handleSubmit;return r.a.createElement(w.a,{size:"large",onSubmit:t},r.a.createElement(C.a,{stacked:!0},r.a.createElement(j.a,{name:"first_name",type:"text",placeholder:"First Name",component:x}),r.a.createElement(j.a,{name:"last_name",type:"text",placeholder:"Last Name",component:x}),r.a.createElement(j.a,{name:"username",type:"text",placeholder:"Username",validate:[R],component:x}),r.a.createElement(j.a,{name:"password",type:"password",placeholder:"Password",validate:[R,L],component:x}),r.a.createElement(j.a,{name:"is_active",label:"Make Active",type:"checkbox",component:_}),r.a.createElement(T.a,{color:"teal",fluid:!0,size:"large"},"Add new user")))})),V=a(105),ee=Object(u.g)((function(e){var t=e.history.goBack,a=Object(l.c)(),n=Object(l.d)((function(e){return e.app.requestError})),c=Object(l.d)((function(e){return e.app.requestSuccess}));return r.a.createElement(M,null,r.a.createElement("div",{className:"credentials-block"},r.a.createElement(H.a,{size:"large",style:{marginBottom:"15px"},name:"arrow left",onClick:t}),r.a.createElement($,{onSubmit:function(e){O(a,e).then((function(){return a(Object(V.a)("user-credentials-form"))})).catch((function(){}))}}),n&&r.a.createElement(z.a,{negative:!0,header:"Failed registration attempt",content:"Please try again"}),c&&r.a.createElement(z.a,{success:!0,header:"Your user registration was successful",content:"You may now log-in with the username you have chosen"})))})),te=a(152),ae=function(e){var t=e.component,a=Object(te.a)(e,["component"]),n=localStorage.getItem("authToken");return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ne=function(e){var t=e.component,a=Object(te.a)(e,["component"]),n=localStorage.getItem("authToken");return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(u.a,{to:{pathname:"/users-list",state:{from:e.location}}}):r.a.createElement(t,e)}}))},re=function(){var e=Object(l.d)((function(e){return e.app.isLoading}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.d,null,r.a.createElement(ne,{path:"/",exact:!0,component:N}),r.a.createElement(ae,{exact:!0,path:"/users-list",component:F}),r.a.createElement(ae,{path:"/add-user",component:ee}),r.a.createElement(u.b,{component:G})),e&&r.a.createElement(Z,null))},ce=function(){return r.a.createElement(re,null)},oe=a(222),le=a(14),ue=a(223),ie=a(215),se=a(225),me=a(40),de={isLoading:!1,requestError:!1,requestSuccess:!1,usersList:null,searchKey:null},pe=Object(le.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_USERS_LIST":return Object(me.a)(Object(me.a)({},e),{},{usersList:Object(se.a)(n)});case"SET_SEARCH_KEY":return Object(me.a)(Object(me.a)({},e),{},{searchKey:n});case"SET_LOADING":return Object(me.a)(Object(me.a)({},e),{},{isLoading:n});case"SET_ERROR_REQUEST":return Object(me.a)(Object(me.a)({},e),{},{requestError:n});case"SET_SUCCESS_REQUEST":return Object(me.a)(Object(me.a)({},e),{},{requestSuccess:n});default:return e}},form:ie.a}),Ee=[oe.a],he=Object(le.createStore)(pe,Object(ue.composeWithDevTools)(le.applyMiddleware.apply(void 0,Ee)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(390),a(391);o.a.render(r.a.createElement(l.a,{store:he},r.a.createElement(u.c,{history:h},r.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[264,1,2]]]);
//# sourceMappingURL=main.1d02da5c.chunk.js.map